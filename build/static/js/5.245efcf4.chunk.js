(window["webpackJsonpreact-mobx-ts-cli"]=window["webpackJsonpreact-mobx-ts-cli"]||[]).push([[5],{368:function(e,t,n){e.exports={operation:"operation--1qqOk",operationBtn:"operationBtn--1iM62",main:"main--3jljR"}},450:function(e,t,n){"use strict";n.r(t);n(174);var a=n(61),r=(n(173),n(120)),i=(n(447),n(444)),o=(n(446),n(443)),c=n(129),s=(n(366),n(445)),u=(n(126),n(57)),l=n(24),d=n(25),p=n(42),f=n(40),m=n(132),h=n(43),b=n(0),y=n.n(b),O=n(368),v=n.n(O),g=n(369),j=n.n(g),w=n(386),D=n.n(w),P={api:{timeout:6e3,code:{success:200},excludedTipCode:[],tip:{unknown:"\u672a\u77e5\u9519\u8bef",serverError:"\u670d\u52a1\u5668\u7e41\u5fd9\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"}},resendVcodeInterval:60},E=n(344),k={api:{url:"/"}};Object(E.defaultsDeep)(k,P);var U={api:{url:""}};Object(E.defaultsDeep)(U,P);var S=U;function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(n,!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M=j.a.create({baseURL:"/api",timeout:S.api.timeout,withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8"}});M.interceptors.request.use((function(e){return"post"===e.method&&(e.data=D.a.stringify(e.data)),e}),(function(e){return Promise.reject(e)})),M.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)}));var I=function(e,t,n,a){return new Promise((function(r,i){M[e](t,n,Object.assign({},a)).then((function(e){r(e.data)}),(function(e){e.Cancel||i(e)})).catch((function(e){i(e)}))}))},L=new function e(){Object(l.a)(this,e),this.post=void 0,this.get=void 0,this.post=function(e,t){return new Promise((function(n,a){I("post",e,t).then((function(e){n(e)})).catch((function(e){a(e)}))}))},this.get=function(e,t){return new Promise((function(n,a){I("get",e,{params:C({},t)}).then((function(e){n(e)})).catch((function(e){a(e)}))}))}};function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(n,!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={tableData:{value:[],loading:!1,pagination:!1},modalData:{visible:!1,value:{id:1,age:1,name:""},type:"add"}},n.columns=[{title:"id",dataIndex:"id",key:"id"},{title:"\u59d3\u540d",dataIndex:"name",key:"name"},{title:"\u5e74\u9f84",dataIndex:"age",key:"age"},{title:"\u64cd\u4f5c",dataIndex:"operation",key:"operation",render:function(e,t){return y.a.createElement("div",{className:v.a.operation},y.a.createElement(u.a,{className:v.a.operationBtn,type:"primary",size:"small",onClick:function(){return n.showModal("edit",t)}},"\u7f16\u8f91"),y.a.createElement(u.a,{className:v.a.operationBtn,type:"danger",size:"small",onClick:function(){return n.deleteUser(t.id)}},"\u5220\u9664"))}}],n.fetchUserList=function(){L.get("/users/list",{}).then((function(e){n.setState({tableData:{loading:!1,value:e.data,pagination:!1}})})).catch((function(e){}))},n.deleteUser=function(e){var t=Object(m.a)(n);s.a.confirm({title:"\u64cd\u4f5c\u786e\u8ba4",content:"\u786e\u8ba4\u5220\u9664\u5417?",onOk:function(){L.post("/users/delete",{id:e}).then((function(e){t.fetchUserList()})).catch((function(e){}))}})},n.showModal=function(e,t){n.setState({modalData:{visible:!0,value:B({},t),type:e}}),n.props.form.setFieldsValue({name:t.name,age:t.age})},n.hideModal=function(){n.setState({modalData:{visible:!1,value:{},type:"add"}})},n.addUser=function(e){L.post("/users/add",e).then((function(e){n.setState({modalData:B({},n.state.modalData,{visible:!1})}),n.fetchUserList()})).catch((function(e){}))},n.editUser=function(e){L.post("/users/update",e).then((function(e){n.setState({modalData:B({},n.state.modalData,{visible:!1})}),n.fetchUserList()})).catch((function(e){}))},n.handleModalSubmit=function(e){e.preventDefault(),n.props.form.validateFields((function(e,t){if(!e){var a=n.state.modalData,r=a.type,i=a.value;"edit"===r?n.editUser(B({},t,{id:i.id})):n.addUser(t)}}))},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchUserList()}},{key:"render",value:function(){var e=this,t=this.state,n=t.tableData,c=t.modalData,l=this.props.form.getFieldDecorator;return y.a.createElement("div",{className:v.a.main},y.a.createElement(u.a,{type:"primary",onClick:function(){return e.showModal("add",{})}},"\u6dfb\u52a0\u7528\u6237"),y.a.createElement(i.a,{title:"userTable",bordered:!0,size:"small"},y.a.createElement(o.a,{columns:this.columns,dataSource:n.value,loading:n.loading,pagination:!1,rowKey:function(e){return String(e.id)}})),y.a.createElement(s.a,{visible:c.visible,title:"\u64cd\u4f5c",onOk:this.handleModalSubmit,onCancel:this.hideModal},y.a.createElement(a.a,null,y.a.createElement(a.a.Item,null,l("name",{rules:[{required:!0,message:"Please input your username!"}]})(y.a.createElement(r.a,{placeholder:"Username"}))),y.a.createElement(a.a.Item,null,l("age",{rules:[{required:!0,message:"Please input your userage!"}]})(y.a.createElement(r.a,{type:"number",placeholder:"Userage"}))))))}}]),t}(b.Component);t.default=a.a.create()(N)}}]);
//# sourceMappingURL=5.245efcf4.chunk.js.map